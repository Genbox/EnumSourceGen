# EnumSourceGen

[![NuGet](https://img.shields.io/nuget/v/Genbox.EnumSourceGen.svg?style=flat-square&label=nuget)](https://www.nuget.org/packages/Genbox.EnumSourceGen/)
[![License](https://img.shields.io/github/license/Genbox/EnumSourceGen)](https://github.com/Genbox/EnumSourceGen/blob/master/LICENSE.txt)

### Description

A source generator to code generate common methods for your enum types.

Print values, parse, or get the underlying value of enums without using reflection.

### Features

* Intuitive API with discoverability through IntelliSense. All enums can be access via the `Enums` class.
* High-performance
    * Zero allocations whenever possible.
    * Support for `Span<char>` inputs.
    * `MemberCount` is const to allow compiler to do constant folding.
* Supports name and description from [DisplayAttribute](https://learn.microsoft.com/en-us/dotnet/api/system.componentmodel.dataannotations.displayattribute?view=net-7.0).
    * Only generate `GetDisplayName()` and `GetDescription()`extensions when the attribute is present.
* Support for flag enums via the [FlagsAttribute](https://learn.microsoft.com/en-us/dotnet/api/system.flagsattribute?view=net-7.0).
    * Only generates `IsFlagSet()` when the attribute is present.
* Support for private/internal enums inside classes
* Has several options to control namespace, class name and more for generated code. See Options section for details.

### Examples

For the code sections below, the follow enum `TestEnum` is defined:

```csharp
[EnumSourceGen]
[Flags]
internal enum TestEnum
{
    [Display(Name = "Value1Name", Description = "Value1Description")]
    Value1 = 1,
    [Display(Name = "DisplayNameForValue2")]
    Value2 = 2,
    [Display(Description = "Description for Value3")]
    Value3 = 4
}
```

#### Extension

The following extensions are auto-generated on TestEnum:

```csharp
TestEnum e = TestEnum.Value1;

Console.WriteLine("String value: " + e.GetString());
Console.WriteLine("Underlying value: " + e.GetUnderlyingValue());
Console.WriteLine("Display name: " + e.GetDisplayName());
Console.WriteLine("Description: " + e.GetDescription());
Console.WriteLine("Has Value1 flag: " + e.IsFlagSet(TestEnum.Value1));
```

Output from the code above:

```
String value: Value1
Underlying value: 1
Display name: Value1Name
Description: Value1Description
Has Value1 flag: True
```

#### Enums class

`Enums` is a class that contains all enums that are auto-generated.

```csharp
Console.WriteLine("Number of members: " + Enums.TestEnum.MemberCount);
Console.WriteLine("Parse: " + Enums.TestEnum.Parse("value1", StringComparison.OrdinalIgnoreCase));
Console.WriteLine("TryParse success: " + Enums.TestEnum.TryParse("value1", out TestEnum val, StringComparison.OrdinalIgnoreCase) + " value: " + val);
Console.WriteLine("Is Value1 part of the enum: " + Enums.TestEnum.IsDefined(TestEnum.Value1));

PrintArray("Member names:", Enums.TestEnum.GetMemberNames());
PrintArray("Member values:", Enums.TestEnum.GetMemberValues());
PrintArray("Underlying values:", Enums.TestEnum.GetUnderlyingValues());
PrintArray("Display names:", Enums.TestEnum.GetDisplayNames());
PrintArray("Descriptions:", Enums.TestEnum.GetDescriptions());
```

PrintArray simply iterate an array and list the values with on separate lines.

Output from the code above:

```
Number of members: 3
Parse: Value1
TryParse success: True value: Value1
Is Value1 part of the enum: True
Member names:
- Value1
- Value2
- Value3
Member values:
- Value1
- Value2
- Value3
Underlying values:
- 1
- 2
- 4
Display names:
- (Value1, Value1Name)
- (Value2, DisplayNameForValue2)
Descriptions:
- (Value1, Value1Description)
- (Value3, Description for Value3)
```

### Options

`EnumSourceGenAttribute` have several options to control behavior of the generated code. They are specified in the constructor.

```csharp
[EnumSourceGen(Generate = Generate.ClassAndExtensions, ExtensionClassName = "MyEnumExtensions")]
internal enum MyEnum
{
    Value,
}
```

##### ExtensionClassNamespace

Use this to control which namespace the enum extensions class belongs to. Defaults to the namespace of the enum.

##### ExtensionClassName

The generated extension class is partial by default. So if you want to combine extension from your own class and the autogenerated one, you can use this option to set the name to
the same as your extensions class. Defaults to &lt;EnumName&gt;Extensions.

##### Generate

You can set 3 different values for this option:

* ClassAndExtensions (default): Generates both a static Enums class member and extensions
* ClassOnly: Only generate the static Enum class member
* ExtensionsOnly: Only generate the enum extensions

It is best practice to only enable what you need to keep the size of your assemblies small.